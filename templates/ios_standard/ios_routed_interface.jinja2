{#-
Version: 1.0.1

Sample data for this template

--- # Test data to for ios
common:
    template: ios_base.jinja2
    ticket_number: CHG123456789
    devices:
    -   device:
        -   devicename: IOS-RTR00
            management_ip: 10.99.222.21
            routed_interfaces:
            -   bfd: true
                description: description a
                interface: g0/0
                ip: 10.1.1.1
                mask: 255.255.255.252
                tag: 701

            -   description: description b
                interface: g0/1
                remove: true
    -   device:
        -   devicename: IOS-RTR01
            management_ip: 10.99.222.22
            routed_interfaces:
            -   acl_in: ACL-IN
                acl_out: ACL-OUT
                description: description a
                interface: g0/10
                ip: 10.1.1.1
                mask: 255.255.255.252

            -   description: description b
                interface: g0/20
                ip: 10.2.2.1
                mask: 255.255.255.252
                vrf: TEST_VRF

-#}
{% for interface in device.routed_interfaces %}
interface {{ interface.interface }}
 {% if interface.remove %}
 no description
 {% else %}
 description {{ interface.description }}
 {% endif %}
 {% if interface.vrf %}
     {% if interface.remove %}
 no ip vrf forwarding {{ interface.vrf }}
     {% else %}
 ip vrf forwarding {{ interface.vrf }}
     {% endif %}
 {% endif %}
 {% if interface.tag %}
     {% if interface.remove %}
 no ncapsulation dot1q {{ interface.tag }}
     {% else %}
 encapsulation dot1q {{ interface.tag }}
     {% endif %}
 {% endif %}
 no switchport
 {% if interface.bfd %}
 bfd interval 250 min_rx 250 multiplier 3
 {% endif %}
 {% if interface.remove %}
 no ip address
 {% else %}
 ip address {{ interface.ip }} {{ interface.mask }}
 {% endif %}
 no ip redirects
 no ip proxy-arp
 arp timeout 270
 {% if interface.acl_in %}
     {% if interface.remove %}
 no ip access-group {{ interface.acl_in }} in
     {% else %}
 ip access-group {{ interface.acl_in }} in
     {% endif %}
 {% endif %}
 {% if interface.acl_out %}
     {% if interface.remove %}
 no ip access-group {{ interface.acl_out }} out
     {% else %}
 ip access-group {{ interface.acl_out }} out
     {% endif %}
 {% endif %}
end
{% endfor %}
