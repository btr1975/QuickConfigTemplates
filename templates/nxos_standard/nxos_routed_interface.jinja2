{#-
Version: 1.0.0

Sample data for this template

--- # Test data to for nxos
common:
    template: nxos_base.jinja2
    ticket_number: CHG123456789
    devices:
        - device:
              - devicename: NXOS-RTR00
                management_ip: 10.99.222.21
                routed_interfaces:
                  - interface: g0/0
                    description: description a
                    tag: 701
                    bfd: true
                    ip: 10.1.1.1
                    mask: 30

                  - interface: g0/1
                    description: description b
                    remove: true

        - device:
              - devicename: NXOS-RTR01
                management_ip: 10.99.222.22
                routed_interfaces:
                  - interface: g0/10
                    description: description a
                    ip: 10.1.1.1
                    mask: 30
                    acl_in: ACL-IN
                    acl_out: ACL-OUT
                    eigrp:
                      process_name: MAIN
                      passive: true
                      summary: 0.0.0.0/0
                      summary_weight: 254
                    ospf:
                      process: 65000
                      passive: true
                      area: 0

                  - interface: g0/20
                    description: description b
                    ip: 10.2.2.1
                    mask: 30

-#}
{% for interface in device.routed_interfaces %}
interface {{ interface.interface }}
 description {{ interface.description }}
 {% if interface.tag %}
 encapsulation dot1q {{ interface.tag }}
 {% endif %}
 no switchport
 {% if interface.bfd %}
 bfd interval 250 min_rx 250 multiplier 3
 {% endif %}
 no ip redirects
 {% if interface.remove %}
 no ip address
 {% else %}
 ip address {{ interface.ip }}/{{ interface.mask }}
 {% endif %}
 {% if interface.eigrp %}
 ip router eigrp {{ interface.eigrp.process_name }}
     {% if interface.eigrp.passive %}
 ip passive-interface eigrp {{ interface.eigrp.process_name }}
     {% endif %}
     {% if interface.eigrp.summary %}
 ip summary-address eigrp {{ interface.eigrp.process_name }} {{ interface.eigrp.summary }} {{ interface.eigrp.summary_weight }}
     {% endif %}
 {% endif %}
 {% if interface.ospf %}
 ip router ospf {{ interface.ospf.process }} area {{ interface.ospf.area }}
    {% if interface.ospf.passive %}
 ip passive-interface ospf
    {% endif %}
 {% endif %}
 {% if interface.acl_in %}
 ip access-group {{ interface.acl_in }} in
 {% endif %}
 {% if interface.acl_out %}
 ip access-group {{ interface.acl_out }} out
 {% endif %}
{% endfor %}